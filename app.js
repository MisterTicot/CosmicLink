(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{113:function(e,t,o){"use strict";var n,r,c,a,i,s,u=o(0),l=o(6),d=o(46),h=o(11),f=o(8);function p(e){var t={};return e.substr(1).split("&").forEach((function(e){var o=e.split("=",1)[0],n=e.substr(o.length+1);t[o]=decodeURIComponent(n)})),t}u.async((function(e){for(;;)switch(e.prev=e.next){case 0:n=document.referrer.split("/",3).join("/"),r=location.hash,c=p(r),(a=l.grab("meta[http-equiv='Content-Security-Policy']")).content=a.content.replace("style-src *  ;","\n    style-src 'self'\n      'sha256-UpnKee22eAiBMULu1lvaV7de7xOzTjdN7K/WZDBil10='\n      ".concat(n,";\n  ")),c.handler&&((i=h.byId[c.handler])?f.authenticator=i:console.error("Unknown handler: ".concat(c.handler))),c.qrcode&&(f.qrCode="false"!==c.qrcode),console.log("Valid handlers: ",Object.keys(h.byId)),s=[],c.css?s.push(d.css("".concat(n,"/").concat(c.css)).catch(console.error)):(s.push(d.css("widget.css").catch(console.error)),c["css+"]&&s.push(d.css("".concat(n,"/").concat(c["css+"])).catch(console.error))),Promise.all(s).then((function(){return l.show(document.body)})),o(84),location.hash=r;case 13:case"end":return e.stop()}}))},121:function(e,t,o){"use strict";var n=o(0),r=t,c=o(85),a=c.CosmicLink,i=o(44),s=o(5),u=o(6),l=o(122),d=o(4).timeout,h=o(11),f=o(8),p=o(93),k=p.enableButton,w=p.disableButton,b=p.readWriteBox,g=p.readOnlyBox,m=p.disableBox,x=p.display,v=p.showIf;r.init=function(){for(var e in f.query||u.rewrite(i.cosmiclink_description,"No transaction"),h.nodes.forEach((function(e){return u.append(i.authenticators,e)})),i.authenticators.value=f.authenticator.name,f.redirect&&(i.redirectionCheckbox.checked=!0),f.qrCode&&I.enable(),localStorage)if("network:"===e.substr(0,8)){var t=e.substr(8),o=c.resolve.networkPassphrase(t);c.config.setupNetwork(t,localStorage[e],o)}},r.refresh=function(){return n.async((function(e){for(;;)switch(e.prev=e.next){case 0:f.query?f.cosmicLink=new a(f.query):f.cosmicLink={tdesc:{}},S.init(),q.init(),f.cosmicLink.query&&y.refresh();case 4:case"end":return e.stop()}}))};var y={refresh:function(){if(!f.authenticator.needSource||f.accountId)if(!f.authenticator.needNetwork||!i.customNetwork.checked||f.horizon&&f.network){c.config.source=f.accountId,c.config.network=f.network;var e=f.transaction=f.authenticator.handle(f.cosmicLink);f.transaction.then((function(t){f.transaction===e&&q.refresh(t)})).catch((function(){f.transaction===e&&q.error(f.cosmicLink.status)}))}else q.error("Please fill custom network fields");else f.authenticator.getAccountId||q.error("Please set a source account")}},S={init:function(){x(i.accountMsgbox,""),f.authenticator=h[i.authenticators.value],localStorage.authenticator=f.authenticator.name,f.authenticator.needSource?B.init():B.disable(),f.authenticator.needNetwork?C.init():C.disable(),f.authenticator.refresh&&f.authenticator.refresh(r.refresh)}},B={disable:function(){u.hide(i.accountDiv),f.accountId=void 0},init:function(){var e,t;return n.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(u.show(i.accountDiv),f.authenticator.getAccountId){o.next=5;break}f.cosmicLink.tdesc.source?f.cosmicLink.tdesc.source.error?m(i.accountIdBox,f.cosmicLink.tdesc.source.error.message):(f.accountId=!0,g(i.accountIdBox,f.cosmicLink.tdesc.source)):(f.accountId=localStorage.accountId,b(i.accountIdBox,"Your Account Address or ID",f.accountId)),o.next=26;break;case 5:return f.accountId=void 0,m(i.accountIdBox,"Connecting..."),e=f.authenticator,o.prev=8,o.next=11,n.awrap(f.authenticator.getAccountId());case 11:if(t=o.sent,f.authenticator===e){o.next=14;break}return o.abrupt("return");case 14:f.accountId=t,g(i.accountIdBox,t),y.refresh(),o.next=26;break;case 19:if(o.prev=19,o.t0=o.catch(8),f.authenticator===e){o.next=23;break}return o.abrupt("return");case 23:i.accountIdBox.placeholder="Error",x(i.accountMsgbox,"error",o.t0.message+"."),console.error(o.t0);case 26:case"end":return o.stop()}}),null,null,[[8,19]])}},C={disable:function(){u.hide(i.networkDiv),f.network="public",f.horizon=void 0},init:function(){switch(u.show(i.networkDiv),u.hide(i.customNetworkSetup),f.network=f.cosmicLink.tdesc.network||localStorage.networkSelector,f.horizon=void 0,f.network){case void 0:case"public":i.publicNetwork.checked=!0,i.networkSelector.scrollLeft=0;break;case"test":i.testNetwork.checked=!0;break;default:i.networkSelector.onscroll&&i.networkSelector.onscroll(),d(1).then((function(){return i.networkSelector.scrollLeft=999})),i.customNetwork.checked=!0,u.show(i.customNetworkSetup),f.network||(f.network=localStorage.customPassphrase),f.horizon=c.resolve.horizon(f.network||"")||f.cosmicLink.tdesc.horizon,i.customPassphrase.value=f.network||"",i.customHorizon.value=f.horizon||""}f.cosmicLink.tdesc.network&&C.lock()},lock:function(){g(i.customPassphrase),i.publicNetwork.disabled=!0,i.testNetwork.disabled=!0,i.customNetwork.disabled=!0},switch:function(e){localStorage.networkSelector=e,r.refresh()}};i.authenticators.onchange=function(){f.authenticator&&f.authenticator.onExit&&f.authenticator.onExit(),f.redirect=localStorage.redirect=!1,i.redirectionCheckbox.checked=!1,r.refresh()},i.accountIdBox.onchange=function(){f.accountId=localStorage.accountId=i.accountIdBox.value,r.refresh()},i.networkSelector.onscroll=function(){i.networkSelector.style.textOverflow="initial",i.networkSelector.onscroll=void 0},i.publicNetwork.onchange=function(){return C.switch("public")},i.testNetwork.onchange=function(){return C.switch("test")},i.customNetwork.onchange=function(){return C.switch("")},i.customPassphrase.onchange=function(){var e=c.resolve.networkName(i.customPassphrase.value);localStorage.customPassphrase=e,C.switch("")},i.customHorizon.onchange=function(){if(f.horizon=i.customHorizon.value,f.horizon&&"http"!==f.horizon.substr(0,4)&&(f.horizon="https://"+f.horizon),f.network&&f.horizon){var e=c.resolve.networkPassphrase(f.network);c.config.setupNetwork(f.network,f.horizon,e),localStorage["network:"+e]=f.horizon}f.network&&r.refresh()};var q={init:function(){if(q.display(""),v(f.authenticator.redirection,i.redirectionForm),v(f.authenticator.textarea,i.textareaForm),v(f.query&&f.authenticator.qrCode,i.qrForm),f.query)f.authenticator.redirection&&w(i.redirectionButton,"â€¦"),f.authenticator.textarea&&m(i.xdrBox,"Computing..."),f.authenticator.qrCode&&I.loadingAnim();else if(f.authenticator.url){k(i.redirectionButton,f.authenticator.buttonText,(function(){return location.href=f.authenticator.url}))}else q.error("No transaction")},refresh:function(e){if(f.authenticator.redirection){k(i.redirectionButton,f.authenticator.buttonText,(function(){return q.click(e)}))}f.redirect&&!f.contextIsWidget&&i.redirectionButton.onclick(),f.authenticator.textarea&&g(i.xdrBox,e),f.authenticator.qrCode&&I.refresh(e)},error:function(e){w(i.redirectionButton,e),m(i.xdrBox,e),u.clear(i.qrCode)},click:function(e){var t;return n.async((function(o){for(;;)switch(o.prev=o.next){case 0:if("string"!=typeof e){o.next=4;break}f.contextIsWidget||s.isEmbedded&&"new"===f.authenticator.target?(open(e,"_blank"),window.parent.postMessage("close","*")):s.isEmbedded&&"external"===f.authenticator.target?(open(e),window.parent.postMessage("close","*")):location.replace(e),o.next=20;break;case 4:if("function"!=typeof e){o.next=20;break}return x(i.redirectionMsgbox,"info","Waiting for confirmation..."),i.redirectionButton.disabled=!0,o.prev=7,o.next=10,n.awrap(e());case 10:return t=o.sent,o.next=13,n.awrap(q.sendTransaction(t));case 13:o.next=20;break;case 15:o.prev=15,o.t0=o.catch(7),console.error(o.t0.response||o.t0),q.display("error",o.t0.message.replace(/\.$/,"")),i.redirectionButton.disabled=!1;case 20:case"end":return o.stop()}}),null,null,[[7,15]])},sendTransaction:function(){return n.async((function(e){for(;;)switch(e.prev=e.next){case 0:return q.display("info","Sending to the network..."),history.replaceState({},"",f.cosmicLink.query),i.query.textContent=f.cosmicLink.query,C.lock(),e.next=6,n.awrap(f.cosmicLink.send());case 6:q.display("info","Transaction validated"),s.isEmbedded&&parent.postMessage("close","*"),document.referrer?k(i.redirectionButton,"Close",(function(){return history.back()})):i.redirectionButton.value="Done";case 9:case"end":return e.stop()}}))},display:function(e,t){x(i.redirectionMsgbox,e,t)}},I={loadingAnim:function(){u.rewrite(i.qrCode,u.create("span",".cosmiclib_loadingAnim"))},refresh:function(e){var t,o;return n.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.awrap(d(0));case 2:if(f.authenticator.qrCode&&e){r.next=4;break}return r.abrupt("return");case 4:t=u.create("canvas",{title:e}),o=Math.max(3,6-Math.floor(Math.sqrt(e)/10)),l.toCanvas(t,e,{margin:0,scale:o}),u.rewrite(i.qrCode,t);case 8:case"end":return r.stop()}}))},switch:function(){f.qrCode=localStorage.QR=!f.qrCode,f.qrCode?I.enable():I.disable()},enable:function(){i.qrButton.className="enabled",u.show(i.qrCode)},disable:function(){i.qrButton.className=void 0,u.hide(i.qrCode)}};i.redirectionButton.onclick=q.click,i.qrButton.onclick=I.switch,i.redirectionCheckbox.onchange=function(){f.redirect=localStorage.redirect=!f.redirect}},146:function(e,t,o){"use strict";o(44).tamper.src="https://robohash.org/"+function(){if(localStorage.myHash)return localStorage.myHash;for(var e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",t="",o=0;o<32;o++)t+=e.charAt(Math.floor(Math.random()*e.length));return localStorage.myHash=t,t}()},19:function(e,t,o){"use strict";o(8).contextIsWidget?o(113):o(84)},84:function(e,t,o){"use strict";var n,r,c=o(85),a=o(44),i=o(6),s=o(120),u=o(8),l=o(93).copyContent;n=o(121),(r=s.add("Sign",a.sign)).onSelect=function(){history.replaceState("",null,location.pathname+location.search),n.refresh()},n.init(),u.contextIsWidget||("null"===location.origin?a.websiteUrl.textContent=location.pathname:a.websiteUrl.textContent=location.origin+location.pathname,a.query.textContent=location.search,a.header.onclick=function(){return l(a.header)},s.add("About",a.about),c.sep7Utils.isWebHandlerSupported()?a.registerSep7Handler.onclick=function(){c.sep7Utils.registerWebHandler(location.href.split(/[?#]/,1)[0],"Cosmic.link")}:a.registerSep7Handler.textContent="",i.show(a.registerSep7Handler),o(146)),s.current===r?r.onSelect():s.current||s.select("#sign")},93:function(e,t,o){"use strict";var n=t,r=o(44),c=o(6);n.enableButton=function(e,t,o){"string"==typeof t&&(e.value=t),e.onclick=o,e.disabled=!1},n.disableButton=function(e,t){"string"==typeof t&&(e.value=t),e.disabled=!0},n.readWriteBox=function(e,t,o){"string"==typeof o&&(e.value=o),"string"==typeof t&&(e.placeholder=t),e.disabled=!1,e.readOnly=!1,e.onclick=void 0,e.style.cursor="initial"},n.readOnlyBox=function(e,t){"string"==typeof t&&(e.value=t),e.disabled=!1,e.readOnly=!0,e.onclick=function(){return n.copyContent(e)},e.style.cursor="pointer"},n.disableBox=function(e,t){n.readWriteBox(e,t,""),e.disabled=!0},n.display=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=t?"."+t:null,r=n?c.create("span",n,o):o;c.rewrite(e,c.create("span",n,r))},n.showIf=function(e,t){e?c.show(t):c.hide(t)},n.switchPage=function(e,t){c.append(r.body,e),c.append(r.main,t)},n.copyContent=function(e){if(c.copyContent(e)&&document.activeElement.value){var t=c.grab("#copied");t&&c.destroy(t);var o=c.create("span","#copied","Copied");e.parentNode.insertBefore(o,e),setTimeout((function(){o.hidden=!0}),3e3)}}}}]);
//# sourceMappingURL=app.js.map