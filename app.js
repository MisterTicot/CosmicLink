(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{120:function(e,t,o){"use strict";o(35).tamper.src="https://robohash.org/"+function(){if(localStorage.myHash)return localStorage.myHash;for(var e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",t="",o=0;o<32;o++)t+=e.charAt(Math.floor(Math.random()*e.length));return localStorage.myHash=t,t}()},19:function(e,t,o){"use strict";o(9).contextIsWidget?o(86):o(64)},64:function(e,t,o){"use strict";var n,r,c=o(48),a=o(35),i=o(7),s=o(97),u=o(9),l=o(70).copyContent;n=o(98),(r=s.add("Sign",a.sign)).onSelect=function(){history.replaceState("",null,location.pathname+location.search),n.refresh()},n.init(),s.current===r?r.onSelect():s.current||s.select("#sign"),u.contextIsWidget||("null"===location.origin?a.websiteUrl.textContent=location.pathname:a.websiteUrl.textContent=location.origin+location.pathname,a.query.textContent=location.search,a.header.onclick=function(){return l(a.header)},s.add("Help",a.help),c.sep7Utils.isWebHandlerSupported()&&(i.show(a.registerSep7Handler),a.registerSep7Handler.onclick=function(){c.sep7Utils.registerWebHandler(location.href.split(/[?#]/,1)[0],"Cosmic.link")}),o(120))},70:function(e,t,o){"use strict";var n=t,r=o(35),c=o(7);n.enableButton=function(e,t,o){"string"==typeof t&&(e.value=t),e.onclick=o,e.disabled=!1},n.disableButton=function(e,t){"string"==typeof t&&(e.value=t),e.disabled=!0},n.readWriteBox=function(e,t,o){"string"==typeof o&&(e.value=o),"string"==typeof t&&(e.placeholder=t),e.disabled=!1,e.readOnly=!1,e.onclick=void 0,e.style.cursor="initial"},n.readOnlyBox=function(e,t){"string"==typeof t&&(e.value=t),e.disabled=!1,e.readOnly=!0,e.onclick=function(){return n.copyContent(e)},e.style.cursor="pointer"},n.disableBox=function(e,t){n.readWriteBox(e,t,""),e.disabled=!0},n.display=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=t?"."+t:null,r=n?c.create("span",n,o):o;c.rewrite(e,c.create("span",n,r))},n.showIf=function(e,t){e?c.show(t):c.hide(t)},n.switchPage=function(e,t){c.append(r.body,e),c.append(r.main,t)},n.copyContent=function(e){if(c.copyContent(e)&&document.activeElement.value){var t=c.grab("#copied");t&&c.destroy(t);var o=c.create("span","#copied","Copied");e.parentNode.insertBefore(o,e),setTimeout((function(){o.hidden=!0}),3e3)}}},86:function(e,t,o){"use strict";var n=o(0),r=o(1),c=o(7),a=o(63),i=o(10),s=o(9);function u(){return(u=r(n.mark((function e(){var t,r,u,d,h;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.referrer.split("/",3).join("/"),r=location.hash,u=l(r),(d=c.grab("meta[http-equiv='Content-Security-Policy']")).content=d.content.replace("style-src *  ;","\n    style-src 'self'\n      'sha256-UpnKee22eAiBMULu1lvaV7de7xOzTjdN7K/WZDBil10='\n      ".concat(t,";\n  ")),u.handler&&((h=i.byId[u.handler])?s.authenticator=h:console.error("Unknown handler: ".concat(u.handler))),u.qrcode&&(s.qrCode="false"!==u.qrcode),console.log("Valid handlers: ",Object.keys(i.byId)),!u.css){e.next=13;break}return e.next=11,a.css("".concat(t,"/").concat(u.css)).catch(console.error);case 11:e.next=18;break;case 13:return e.next=15,a.css("widget.css").catch(console.error);case 15:if(!u["css+"]){e.next=18;break}return e.next=18,a.css("".concat(t,"/").concat(u["css+"])).catch(console.error);case 18:c.show(document.body),o(64),location.hash=r;case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){var t={};return e.substr(1).split("&").forEach((function(e){var o=e.split("=",1)[0],n=e.substr(o.length+1);t[o]=decodeURIComponent(n)})),t}!function(){u.apply(this,arguments)}()},98:function(e,t,o){"use strict";var n=o(0),r=o(1),c=t,a=o(48),i=a.CosmicLink,s=o(35),u=o(5),l=o(7),d=o(99),h=o(6).timeout,f=o(10),p=o(9),k=o(70),w=k.enableButton,b=k.disableButton,g=k.readWriteBox,m=k.readOnlyBox,v=k.disableBox,x=k.display,y=k.showIf;c.init=function(){for(var e in p.query||l.rewrite(s.cosmiclink_description,"No transaction"),f.nodes.forEach((function(e){return l.append(s.authenticators,e)})),s.authenticators.value=p.authenticator.name,p.redirect&&(s.redirectionCheckbox.checked=!0),p.qrCode&&N.enable(),localStorage)if("network:"===e.substr(0,8)){var t=e.substr(8),o=a.resolve.networkPassphrase(t);a.config.setupNetwork(t,localStorage[e],o)}},c.refresh=r(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.query?p.cosmicLink=new i(p.query):p.cosmicLink={tdesc:{}},B.init(),q.init(),p.cosmicLink.query&&S.refresh();case 4:case"end":return e.stop()}}),e)})));var S={refresh:function(){if(!p.authenticator.needSource||p.accountId)if(!p.authenticator.needNetwork||!s.customNetwork.checked||p.horizon&&p.network){a.config.source=p.accountId,a.config.network=p.network;var e=p.transaction=p.authenticator.handle(p.cosmicLink);p.transaction.then((function(t){p.transaction===e&&q.refresh(t)})).catch((function(){p.transaction===e&&q.error(p.cosmicLink.status)}))}else q.error("Please fill custom network fields");else p.authenticator.getAccountId||q.error("Please set a source account")}},B={init:function(){x(s.accountMsgbox,""),p.authenticator=f[s.authenticators.value],localStorage.authenticator=p.authenticator.name,p.authenticator.needSource?C.init():C.disable(),p.authenticator.needNetwork?I.init():I.disable(),p.authenticator.refresh&&p.authenticator.refresh(c.refresh)}},C={disable:function(){l.hide(s.accountDiv),p.accountId=void 0}};C.init=r(n.mark((function e(){var t,o;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.show(s.accountDiv),p.authenticator.getAccountId){e.next=5;break}p.cosmicLink.tdesc.source?p.cosmicLink.tdesc.source.error?v(s.accountIdBox,p.cosmicLink.tdesc.source.error.message):(p.accountId=!0,m(s.accountIdBox,p.cosmicLink.tdesc.source)):(p.accountId=localStorage.accountId,g(s.accountIdBox,"Your Account Address or ID",p.accountId)),e.next=26;break;case 5:return p.accountId=void 0,v(s.accountIdBox,"Connecting..."),t=p.authenticator,e.prev=8,e.next=11,p.authenticator.getAccountId();case 11:if(o=e.sent,p.authenticator===t){e.next=14;break}return e.abrupt("return");case 14:p.accountId=o,m(s.accountIdBox,o),S.refresh(),e.next=26;break;case 19:if(e.prev=19,e.t0=e.catch(8),p.authenticator===t){e.next=23;break}return e.abrupt("return");case 23:s.accountIdBox.placeholder="Error",x(s.accountMsgbox,"error",e.t0.message+"."),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[8,19]])})));var I={disable:function(){l.hide(s.networkDiv),p.network="public",p.horizon=void 0},init:function(){switch(l.show(s.networkDiv),l.hide(s.customNetworkSetup),p.network=p.cosmicLink.tdesc.network||localStorage.networkSelector,p.horizon=void 0,p.network){case void 0:case"public":s.publicNetwork.checked=!0,s.networkSelector.scrollLeft=0;break;case"test":s.testNetwork.checked=!0;break;default:s.networkSelector.onscroll&&s.networkSelector.onscroll(),h(1).then((function(){return s.networkSelector.scrollLeft=999})),s.customNetwork.checked=!0,l.show(s.customNetworkSetup),p.network||(p.network=localStorage.customPassphrase),p.horizon=a.resolve.horizon(p.network||"")||p.cosmicLink.tdesc.horizon,s.customPassphrase.value=p.network||"",s.customHorizon.value=p.horizon||""}p.cosmicLink.tdesc.network&&I.lock()},lock:function(){m(s.customPassphrase),s.publicNetwork.disabled=!0,s.testNetwork.disabled=!0,s.customNetwork.disabled=!0},switch:function(e){localStorage.networkSelector=e,c.refresh()}};s.authenticators.onchange=function(){p.authenticator&&p.authenticator.onExit&&p.authenticator.onExit(),p.redirect=localStorage.redirect=!1,s.redirectionCheckbox.checked=!1,c.refresh()},s.accountIdBox.onchange=function(){p.accountId=localStorage.accountId=s.accountIdBox.value,c.refresh()},s.networkSelector.onscroll=function(){s.networkSelector.style.textOverflow="initial",s.networkSelector.onscroll=void 0},s.publicNetwork.onchange=function(){return I.switch("public")},s.testNetwork.onchange=function(){return I.switch("test")},s.customNetwork.onchange=function(){return I.switch("")},s.customPassphrase.onchange=function(){var e=a.resolve.networkName(s.customPassphrase.value);localStorage.customPassphrase=e,I.switch("")},s.customHorizon.onchange=function(){if(p.horizon=s.customHorizon.value,p.horizon&&"http"!==p.horizon.substr(0,4)&&(p.horizon="https://"+p.horizon),p.network&&p.horizon){var e=a.resolve.networkPassphrase(p.network);a.config.setupNetwork(p.network,p.horizon,e),localStorage["network:"+e]=p.horizon}p.network&&c.refresh()};var q={init:function(){if(q.display(""),y(p.authenticator.redirection,s.redirectionForm),y(p.authenticator.textarea,s.textareaForm),y(p.query&&p.authenticator.qrCode,s.qrForm),p.query)p.authenticator.redirection&&b(s.redirectionButton,"â€¦"),p.authenticator.textarea&&v(s.xdrBox,"Computing..."),p.authenticator.qrCode&&N.loadingAnim();else if(p.authenticator.url){w(s.redirectionButton,p.authenticator.buttonText,(function(){return location.href=p.authenticator.url}))}else q.error("No transaction")},refresh:function(e){if(p.authenticator.redirection){w(s.redirectionButton,p.authenticator.buttonText,(function(){return q.click(e)}))}p.redirect&&!p.contextIsWidget&&s.redirectionButton.onclick(),p.authenticator.textarea&&m(s.xdrBox,e),p.authenticator.qrCode&&N.refresh(e)},error:function(e){b(s.redirectionButton,e),v(s.xdrBox,e),l.clear(s.qrCode)}};q.click=function(){var e=r(n.mark((function e(t){var o;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=4;break}p.contextIsWidget||u.isEmbedded&&"new"===p.authenticator.target?(open(t,"_blank"),window.parent.postMessage("close","*")):u.isEmbedded&&"external"===p.authenticator.target?(open(t),window.parent.postMessage("close","*")):location.replace(t),e.next=20;break;case 4:if("function"!=typeof t){e.next=20;break}return x(s.redirectionMsgbox,"info","Waiting for confirmation..."),s.redirectionButton.disabled=!0,e.prev=7,e.next=10,t();case 10:return o=e.sent,e.next=13,q.sendTransaction(o);case 13:e.next=20;break;case 15:e.prev=15,e.t0=e.catch(7),console.error(e.t0.response||e.t0),q.display("error",e.t0.message.replace(/\.$/,"")),s.redirectionButton.disabled=!1;case 20:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(t){return e.apply(this,arguments)}}(),q.sendTransaction=r(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q.display("info","Sending to the network..."),history.replaceState({},"",p.cosmicLink.query),s.query.textContent=p.cosmicLink.query,I.lock(),e.next=6,p.cosmicLink.send();case 6:q.display("info","Transaction validated"),u.isEmbedded&&parent.postMessage("close","*"),document.referrer?w(s.redirectionButton,"Close",(function(){return history.back()})):s.redirectionButton.value="Done";case 9:case"end":return e.stop()}}),e)}))),q.display=function(e,t){x(s.redirectionMsgbox,e,t)};var N={loadingAnim:function(){l.rewrite(s.qrCode,l.create("canvas",".cosmiclib_loadingAnim"))},refresh:function(e){if(p.authenticator.qrCode&&e){var t=l.create("canvas");d.toCanvas(t,e,{margin:0,scale:4}),t.title=e,l.rewrite(s.qrCode,t)}},switch:function(){p.qrCode=localStorage.QR=!p.qrCode,p.qrCode?N.enable():N.disable()},enable:function(){s.qrButton.className="enabled",l.show(s.qrCode)},disable:function(){s.qrButton.className=void 0,l.hide(s.qrCode)}};s.redirectionButton.onclick=q.click,s.qrButton.onclick=N.switch,s.redirectionCheckbox.onchange=function(){p.redirect=localStorage.redirect=!p.redirect}}}]);
//# sourceMappingURL=app.js.map