(window.webpackJsonplib=window.webpackJsonplib||[]).push([[0],{15:function(e,t,o){var n=o(27),r=o(53),c=o(40).copyContent;"null"===location.origin?n.websiteUrl.textContent=location.pathname:n.websiteUrl.textContent=location.origin+location.pathname,n.query.textContent=location.search,n.header.onclick=function(){return c(n.header)},o(54);var i=o(55),a=r.add("Sign",n.sign);a.onSelect=function(){history.replaceState("",null,location.pathname+location.search),i.refresh()},i.init(),r.add("Help",n.help),r.current===a?a.onSelect():r.current||r.select("#sign")},40:function(e,t,o){var n=t,r=o(27),c=o(2);n.enableButton=function(e,t,o){"string"==typeof t&&(e.value=t),e.onclick=o,e.disabled=!1},n.disableButton=function(e,t){"string"==typeof t&&(e.value=t),e.disabled=!0},n.readWriteBox=function(e,t,o){"string"==typeof o&&(e.value=o),"string"==typeof t&&(e.placeholder=t),e.disabled=!1,e.readOnly=!1,e.onclick=void 0,e.style.cursor="initial"},n.readOnlyBox=function(e,t){"string"==typeof t&&(e.value=t),e.disabled=!1,e.readOnly=!0,e.onclick=function(){return n.copyContent(e)},e.style.cursor="pointer"},n.disableBox=function(e,t){n.readWriteBox(e,t,""),e.disabled=!0},n.display=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=t?"."+t:null,r=n?c.create("span",n,o):o;c.rewrite(e,c.create("span",n,r))},n.showIf=function(e,t){e?c.show(t):c.hide(t)},n.switchPage=function(e,t){c.append(r.body,e),c.append(r.main,t)},n.copyContent=function(e){if(c.copyContent(e)&&document.activeElement.value){var t=c.grab("#copied");t&&c.destroy(t);var o=c.create("span","#copied","Copied");e.parentNode.insertBefore(o,e),setTimeout(function(){o.hidden=!0},3e3)}}},54:function(e,t,o){o(27).tamper.src="https://robohash.org/"+function(){if(localStorage.myHash)return localStorage.myHash;for(var e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",t="",o=0;o<32;o++)t+=e.charAt(Math.floor(Math.random()*e.length));return localStorage.myHash=t,t}()},55:function(e,t,o){var n=o(0);function r(e,t,o,n,r,c,i){try{var a=e[c](i),s=a.value}catch(e){return void o(e)}a.done?t(s):Promise.resolve(s).then(n,r)}function c(e){return function(){var t=this,o=arguments;return new Promise(function(n,c){var i=e.apply(t,o);function a(e){r(i,n,c,a,s,"next",e)}function s(e){r(i,n,c,a,s,"throw",e)}a(void 0)})}}var i=t,a=o(56),s=a.CosmicLink,u=o(27),l=o(3),d=o(2),h=o(65),f=o(1).timeout,k=o(7),p=o(8),w=o(40),m=w.enableButton,v=w.disableButton,b=w.readWriteBox,g=w.readOnlyBox,x=w.disableBox,y=w.display,B=w.showIf;i.init=function(){for(var e in p.query||d.rewrite(u.cosmiclink_description,"No transaction"),k.nodes.forEach(function(e){return d.append(u.authenticators,e)}),u.authenticators.value=p.authenticator.name,p.redirect&&(u.redirectionCheckbox.checked=!0),p.qrCode&&L.enable(),localStorage)if("network:"===e.substr(0,8)){var t=e.substr(8),o=a.resolve.networkPassphrase(t);a.config.setupNetwork(t,localStorage[e],o)}},i.refresh=c(n.mark(function e(){return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:p.query?p.cosmicLink=new s(p.query):p.cosmicLink={tdesc:{}},C.init(),N.init(),p.cosmicLink&&S.refresh();case 4:case"end":return e.stop()}},e,this)}));var S={refresh:function(){if(!p.authenticator.needSource||p.accountId)if(!p.authenticator.needNetwork||!u.customNetwork.checked||p.horizon&&p.network){a.config.source=p.accountId,a.config.network=p.network,p.cosmicLink.selectNetwork();var e=p.transaction=p.authenticator.handle(p.cosmicLink);p.transaction.then(function(t){p.transaction===e&&N.refresh(t)}).catch(function(){p.transaction===e&&N.error(p.cosmicLink.status)})}else N.error("Please fill custom network fields");else p.authenticator.getAccountId||N.error("Please set a source account")}},C={init:function(){y(u.accountMsgbox,""),p.authenticator=k[u.authenticators.value],localStorage.authenticator=p.authenticator.name,p.authenticator.needSource?q.init():q.disable(),p.authenticator.needNetwork?I.init():I.disable(),p.authenticator.refresh&&p.authenticator.refresh(i.refresh)}},q={disable:function(){d.hide(u.accountDiv),p.accountId=void 0}};q.init=c(n.mark(function e(){var t,o;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d.show(u.accountDiv),p.authenticator.getAccountId){e.next=5;break}p.cosmicLink.tdesc.source?p.cosmicLink.tdesc.source.error?x(u.accountIdBox,p.cosmicLink.tdesc.source.error.message):(p.accountId=!0,g(u.accountIdBox,p.cosmicLink.tdesc.source)):(p.accountId=localStorage.accountId,b(u.accountIdBox,"Your Account Address or ID",p.accountId)),e.next=25;break;case 5:return p.accountId=void 0,x(u.accountIdBox,"Connecting..."),t=p.authenticator,e.prev=8,e.next=11,p.authenticator.getAccountId();case 11:if(o=e.sent,p.authenticator===t){e.next=14;break}return e.abrupt("return");case 14:p.accountId=o,g(u.accountIdBox,o),S.refresh(),e.next=25;break;case 19:if(e.prev=19,e.t0=e.catch(8),p.authenticator===t){e.next=23;break}return e.abrupt("return");case 23:u.accountIdBox.placeholder="Error",y(u.accountMsgbox,"error",e.t0.message+".");case 25:case"end":return e.stop()}},e,this,[[8,19]])}));var I={disable:function(){d.hide(u.networkDiv),p.network="public",p.horizon=void 0},init:function(){switch(d.show(u.networkDiv),d.hide(u.customNetworkSetup),p.network=p.cosmicLink.tdesc.network||localStorage.networkSelector||"public",p.horizon=void 0,p.network){case void 0:case"public":u.publicNetwork.checked=!0,u.networkSelector.scrollLeft=0;break;case"test":u.testNetwork.checked=!0;break;default:u.networkSelector.onscroll&&u.networkSelector.onscroll(),f(1).then(function(){return u.networkSelector.scrollLeft=999}),u.customNetwork.checked=!0,d.show(u.customNetworkSetup),p.network||(p.network=localStorage.customPassphrase),p.horizon=a.resolve.horizon(p.network||"")||p.cosmicLink.tdesc.horizon,u.customPassphrase.value=p.network||"",u.customHorizon.value=p.horizon||""}p.cosmicLink.tdesc.network&&I.lock()},lock:function(){g(u.customPassphrase),u.publicNetwork.disabled=!0,u.testNetwork.disabled=!0,u.customNetwork.disabled=!0},switch:function(e){localStorage.networkSelector=e,i.refresh()}};u.authenticators.onchange=function(){p.authenticator&&p.authenticator.onExit&&p.authenticator.onExit(),p.redirect=localStorage.redirect=!1,u.redirectionCheckbox.checked=!1,i.refresh()},u.accountIdBox.onchange=function(){p.accountId=localStorage.accountId=u.accountIdBox.value,i.refresh()},u.networkSelector.onscroll=function(){u.networkSelector.style.textOverflow="initial",u.networkSelector.onscroll=void 0},u.publicNetwork.onchange=function(){return I.switch("public")},u.testNetwork.onchange=function(){return I.switch("test")},u.customNetwork.onchange=function(){return I.switch("")},u.customPassphrase.onchange=function(){var e=a.resolve.networkName(u.customPassphrase.value);localStorage.customPassphrase=e,I.switch("")},u.customHorizon.onchange=function(){if(p.horizon=u.customHorizon.value,p.horizon&&"http"!==p.horizon.substr(0,4)&&(p.horizon="https://"+p.horizon),p.network&&p.horizon){var e=a.resolve.networkPassphrase(p.network);a.config.setupNetwork(p.network,p.horizon,e),localStorage["network:"+e]=p.horizon}p.network&&i.refresh()};var N={init:function(){if(N.display(""),B(p.authenticator.redirection,u.redirectionForm),B(p.authenticator.textarea,u.textareaForm),B(p.query&&p.authenticator.qrCode,u.qrForm),p.query)p.authenticator.redirection&&v(u.redirectionButton,"â€¦"),p.authenticator.textarea&&x(u.xdrBox,"Computing..."),p.authenticator.qrCode&&L.loadingAnim();else if(p.authenticator.url){m(u.redirectionButton,p.authenticator.buttonText,function(){return location.href=p.authenticator.url})}else N.error("No transaction")},refresh:function(e){if(p.authenticator.redirection){m(u.redirectionButton,p.authenticator.buttonText,function(){return N.click(e)})}p.redirect&&u.redirectionButton.onclick(),p.authenticator.textarea&&g(u.xdrBox,e),p.authenticator.qrCode&&L.refresh(e)},error:function(e){v(u.redirectionButton,e),x(u.xdrBox,e),d.clear(u.qrCode)}};N.click=function(){var e=c(n.mark(function e(t){var o;return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=4;break}l.isEmbedded&&"new"===p.authenticator.target?(open(t,"_blank"),window.parent.postMessage("close","*")):(location.replace(t),l.isEmbedded&&"external"===p.authenticator.target&&window.parent.postMessage("close","*")),e.next=20;break;case 4:if("function"!=typeof t){e.next=20;break}return y(u.redirectionMsgbox,"info","Waiting for confirmation..."),u.redirectionButton.disabled=!0,e.prev=7,e.next=10,t();case 10:return o=e.sent,e.next=13,N.sendTransaction(o);case 13:e.next=20;break;case 15:e.prev=15,e.t0=e.catch(7),console.error(e.t0.response||e.t0),N.display("error",e.t0.message.replace(/\.$/,"")),u.redirectionButton.disabled=!1;case 20:case"end":return e.stop()}},e,this,[[7,15]])}));return function(t){return e.apply(this,arguments)}}(),N.sendTransaction=c(n.mark(function e(){return n.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return N.display("info","Sending to the network..."),history.replaceState({},"",p.cosmicLink.query),u.query.textContent=p.cosmicLink.query,I.lock(),e.next=6,p.cosmicLink.send();case 6:N.display("info","Transaction validated"),l.isEmbedded&&parent.postMessage("close","*"),document.referrer?m(u.redirectionButton,"Close",function(){return history.back()}):u.redirectionButton.value="Done";case 9:case"end":return e.stop()}},e,this)})),N.display=function(e,t){y(u.redirectionMsgbox,e,t)};var L={loadingAnim:function(){d.rewrite(u.qrCode,d.create("canvas",".cosmiclib_loadingAnim"))},refresh:function(e){if(p.authenticator.qrCode&&e){var t=d.create("canvas");h.toCanvas(t,e,{margin:0,scale:4}),t.title=e,d.rewrite(u.qrCode,t)}},switch:function(){p.qrCode=localStorage.QR=!p.qrCode,p.qrCode?L.enable():L.disable()},enable:function(){u.qrButton.className="enabled",d.show(u.qrCode)},disable:function(){u.qrButton.className=void 0,d.hide(u.qrCode)}};u.redirectionButton.onclick=N.click,u.qrButton.onclick=L.switch,u.redirectionCheckbox.onchange=function(){p.redirect=localStorage.redirect=!p.redirect}}}]);
//# sourceMappingURL=app.js.map